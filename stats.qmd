---
title: "Statistiques Descriptives"
---

Sur cette page, nous analysons l'évolution des températures en France.

```{r}
#| echo: false
#| warning: false
#| message: false

# --- BLOC 1 : CHARGEMENT ---
library(data.table)
library(ggplot2)

# On charge le fichier que vous avez créé à la fin de la Partie 1
dt <- fread("data/data_finale.csv")
```

## Évolution de la Température

Voici un graphique montrant la moyenne des températures par année :

```{r}
#| echo: false

ggplot(dt, aes(x = year, y = temp_moy, group = year)) +
  geom_boxplot(fill = "lightblue", alpha = 0.7) +
  labs(title = "Distribution des températures mensuelles",
       x = "Année", y = "Température (°C)") +
  theme_minimal()
```

## Résumé des Catastrophes

Y a-t-il plus de catastrophes aujourd'hui qu'avant ?

```{r}
#| echo: false

# On agrège par année pour avoir un graphique lisible
dt_annuel <- dt[, .(Total_Catastrophes = sum(nb_disasters)), by = year]

ggplot(dt_annuel, aes(x = year, y = Total_Catastrophes)) +
  geom_col(fill = "salmon") +
  geom_smooth(method = "lm", se = FALSE, color = "darkred", linetype = "dashed") +
  labs(title = "Nombre total de catastrophes par an en France",
       subtitle = "La ligne pointillée indique la tendance générale",
       x = "Année", y = "Nombre de catastrophes") +
  theme_minimal()
```

## Tableau récapitulatif Global

```{r}
#| echo: false
#| warning: false

# On crée un petit tableau propre
resume <- dt[, .(
  Moyenne_Temp = round(mean(temp_moy, na.rm=T), 1),
  Total_Catastrophes = sum(nb_disasters),
  Total_Morts = sum(nb_deaths),
  Cout_Total_Millions = round(sum(total_damages)/1000, 1)
)]
 
knitr::kable(resume, caption = "Résumé global (1996-2022)")
```




